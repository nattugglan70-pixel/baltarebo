<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Min Dashboard</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0f0f0f;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
}

.box {
  background: #1a1a1a;
  padding: 20px;
  margin: 15px;
  border-radius: 10px;
  width: 320px;
}

h2 {
  margin-bottom: 15px;
  text-align: center;
}

.row {
  display: flex;
  justify-content: space-between;
  margin: 8px 0;
}

.big {
  font-size: 20px;
  font-weight: bold;
}

.green { color: #00ff99; }
.orange { color: #ff9900; }

.small {
  font-size: 12px;
  color: #aaa;
  text-align: center;
  margin-top: 10px;
}
</style>
</head>

<body>

<div class="box">
  <h2>Elpris SE4</h2>

  <div class="row">
    <div>Aktuell timme</div>
    <div id="current" class="big green">--</div>
  </div>

  <div class="row">
    <div>Föregående timme</div>
    <div id="previous" class="big orange">--</div>
  </div>

  <div id="updated" class="small">Uppdaterar...</div>
</div>

<script>
async function loadElectricity() {
  try {
    const response = await fetch(
      "https://api.energidataservice.dk/dataset/Elspotprices?limit=2&sort=-HourUTC&filter={\"PriceArea\":\"SE4\"}"
    );

    const data = await response.json();

    if (!data.records || data.records.length < 2) {
      document.getElementById("current").innerText = "Ingen data";
      return;
    }

    const current = data.records[0];
    const previous = data.records[1];

    document.getElementById("current").innerText =
      (current.SpotPriceSEK / 1000).toFixed(2) + " SEK/kWh";

    document.getElementById("previous").innerText =
      (previous.SpotPriceSEK / 1000).toFixed(2) + " SEK/kWh";

    document.getElementById("updated").innerText =
      "Senast uppdaterad: " + new Date().toLocaleTimeString("sv-SE");

  } catch (error) {
    console.error(error);
    document.getElementById("current").innerText = "Fel vid hämtning";
  }
}

loadElectricity();
setInterval(loadElectricity, 300000);
</script>

</body>
</html>

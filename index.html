<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Dashboard Väder + Tech-nyheter</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    margin: 20px;
    display: flex;
    gap: 20px;
  }

  /* --- Väderpanel --- */
  .weather-panel {
    flex: 1;
    max-width: 300px;
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  /* Här placerar du din befintliga vädermodul kod med ikoner, temperaturer etc. */

  /* --- Nyheter-panel --- */
  .news-panel {
    flex: 1;
    max-width: 400px;
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow-y: auto;
    max-height: 600px;
  }

  .news-item {
    background: #f9f9f9;
    padding: 12px;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    transition: transform 0.2s, background 0.2s;
    cursor: pointer;
  }

  .news-item:hover {
    background: #ffeb3b; /* gul hover */
    transform: translateY(-2px);
  }

  .news-title {
    font-weight: bold;
    margin-bottom: 4px;
  }

  .news-source {
    font-size: 0.8em;
    color: #555;
  }

  .news-date {
    font-size: 0.75em;
    color: #777;
  }
</style>
</head>
<body>

<!-- ------------------ Väderpanelen ------------------ -->
<div class="weather-panel" id="weatherPanel">
  <!-- Här ersätter du detta med din faktiska vädermodul -->
  <h2>Väder</h2>
  <p>Din befintliga väderruta med ikoner, temperaturer och feels-like ligger här.</p>
</div>

<!-- ------------------ Nyhetsstapeln ------------------ -->
<div class="news-panel" id="newsPanel">
  <h2>Senaste Android/Tech-nyheterna</h2>
</div>

<script>
// ------------------ RSS-källor ------------------
const rssFeeds = [
  { url: 'https://www.breakit.se/feed', source: 'Breakit' },
  { url: 'https://www.m3.idg.se/rss', source: 'M3' },
  { url: 'https://www.idg.se/rss', source: 'IDG Techworld' },
  { url: 'https://www.androidauthority.com/feed/', source: 'Android Authority' },
  { url: 'https://www.xda-developers.com/feed/', source: 'XDA Developers' },
  { url: 'https://www.theverge.com/rss/index.xml', source: 'The Verge' }
];

// ------------------ Funktion för att hämta nyheter ------------------
function fetchNews() {
  const panel = document.getElementById('newsPanel');
  panel.innerHTML = '<h2>Senaste Android/Tech-nyheterna</h2>'; // reset

  rssFeeds.forEach(feed => {
    const rssUrl = encodeURIComponent(feed.url);
    const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${rssUrl}`;

    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        const items = data.items.slice(0, 3); // 3 senaste från varje källa

        items.forEach(item => {
          const div = document.createElement('div');
          div.className = 'news-item';
          div.title = item.description || 'Ingen ingress'; // hover-text
          div.onclick = () => window.open(item.link, '_blank'); // klickbar länk

          const title = document.createElement('div');
          title.className = 'news-title';
          title.textContent = item.title;

          const source = document.createElement('div');
          source.className = 'news-source';
          source.textContent = feed.source;

          const date = document.createElement('div');
          date.className = 'news-date';
          date.textContent = new Date(item.pubDate).toLocaleString('sv-SE', {
            weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute:'2-digit'
          });

          div.appendChild(title);
          div.appendChild(source);
          div.appendChild(date);
          panel.appendChild(div);
        });
      })
      .catch(err => console.error('Kunde inte hämta nyheter från', feed.source, err));
  });
}

// Hämta nyheter direkt vid sidladdning
fetchNews();

// Uppdatera automatiskt var 10:e minut
setInterval(fetchNews, 10 * 60 * 1000);
</script>

</body>
</html>

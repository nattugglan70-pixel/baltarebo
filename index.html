<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Temperatur Dashboard</title>
<style>
  /* Bas-stilar */
  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  #container {
    text-align: center;
  }

  #temp-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 10px;
  }

  #temp {
    font-size: 80px;
    font-weight: bold;
  }

  #newtab-btn {
    font-size: 28px;
    text-decoration: none;
    color: white;
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }

  #newtab-btn:hover {
    opacity: 1;
  }

  #date, #updated {
    font-size: 18px;
    margin: 3px 0;
  }
</style>
</head>
<body>
<div id="container">
  <div id="temp-row">
    <span id="temp">--°C</span>
    <a href="chrome://newtab" id="newtab-btn" title="Öppna Bonjourr">⌂</a>
  </div>
  <div id="date"></div>
  <div id="updated"></div>
</div>

<script>
// --- Datum ---
function updateDate() {
  const now = new Date();
  const weekdays = ["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"];
  const day = weekdays[now.getDay()];
  const date = now.getDate();
  const month = now.toLocaleString('sv-SE', {month:'long'});
  const year = now.getFullYear();
  document.getElementById('date').textContent = `${day} ${date} ${month} ${year}`;
}

// --- Temperatur från GitHub / Temperatur.nu ---
async function updateTemp() {
  try {
    const res = await fetch('https://api.temperatur.nu/tnu_1.17.php?p=karlsbro&cli=githubpage');
    const data = await res.json();
    const temp = data.stations[0].temp;
    document.getElementById('temp').textContent = `${temp}°C`;

    // Senast uppdaterad
    const now = new Date();
    const hours = now.getHours().toString().padStart(2,'0');
    const minutes = now.getMinutes().toString().padStart(2,'0');
    document.getElementById('updated').textContent = `Senast uppdaterad: ${hours}:${minutes}`;
  } catch (e) {
    document.getElementById('temp').textContent = '--°C';
    document.getElementById('updated').textContent = `Senast uppdaterad: -`;
  }
}

// --- Init ---
updateDate();
updateTemp();

// --- Uppdatera varje 5 minuter ---
setInterval(updateTemp, 5 * 60 * 1000);
</script>
</body>
</html>
